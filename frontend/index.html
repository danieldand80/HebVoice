<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Image Generator - מחולל תמונות AI</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div>
                    <h1 data-en="🎨 AI Product Image Generator" data-he="🎨 מחולל תמונות מוצר AI">🎨 מחולל תמונות מוצר AI</h1>
                    <p data-en="Create professional product images with AI" data-he="צור תמונות מוצר מקצועיות עם AI">צור תמונות מוצר מקצועיות עם AI</p>
                </div>
                <div class="language-switcher">
                    <button id="langBtn" class="lang-btn" onclick="toggleLanguage()">
                        <span id="langText">EN</span> 🌐
                    </button>
                </div>
            </div>
        </header>

        <!-- Step 1: Generate Image -->
        <div id="step1" class="step-container">
            <h2 data-en="Generate Image" data-he="יצירת תמונה">יצירת תמונה</h2>
            
            <form id="imageForm">
                <div class="form-group">
                    <label data-en="Choose Format:" data-he="בחר פורמט:">בחר פורמט:</label>
                    <div class="format-selector">
                        <label class="format-option">
                            <input type="radio" name="aspect_ratio" value="16:9" checked>
                            <span data-en="16:9 (Horizontal)" data-he="16:9 (אופקי)">16:9 (אופקי)</span>
                        </label>
                        <label class="format-option">
                            <input type="radio" name="aspect_ratio" value="9:16">
                            <span data-en="9:16 (Vertical)" data-he="9:16 (אנכי)">9:16 (אנכי)</span>
                        </label>
                        <label class="format-option">
                            <input type="radio" name="aspect_ratio" value="1:1">
                            <span data-en="1:1 (Square)" data-he="1:1 (ריבוע)">1:1 (ריבוע)</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="goalPreset" data-en="Choose Goal (Optional):" data-he="בחר מטרה (אופציונלי):">בחר מטרה (אופציונלי):</label>
                    <select id="goalPreset" name="goal_preset">
                        <option value="" data-en="-- Custom/None --" data-he="-- ללא תבנית --">-- ללא תבנית --</option>
                        <option value="facebook_ads" data-en="📱 Facebook/Instagram Ads" data-he="📱 פרסום בפייסבוק/אינסטגרם">📱 פרסום בפייסבוק/אינסטגרם</option>
                        <option value="instagram_story" data-en="📸 Instagram Story/Reels" data-he="📸 סטורי/רילס אינסטגרם">📸 סטורי/רילס אינסטגרם</option>
                        <option value="youtube_thumbnail" data-en="🎥 YouTube Thumbnail" data-he="🎥 תמונת פתיח יוטיוב">🎥 תמונת פתיח יוטיוב</option>
                        <option value="product_showcase" data-en="🛍️ Product Showcase" data-he="🛍️ תצוגת מוצר">🛍️ תצוגת מוצר</option>
                        <option value="professional_post" data-en="✨ Professional Post" data-he="✨ פוסט מקצועי">✨ פוסט מקצועי</option>
                    </select>
                    <small data-en="Select a goal to auto-fill prompt with professional template" data-he="בחר מטרה למילוי אוטומטי של פרומפט מקצועי">בחר מטרה למילוי אוטומטי של פרומפט מקצועי</small>
                </div>

                <div class="form-group">
                    <label for="prompt" data-en="Product/Scene Description:" data-he="תיאור המוצר/סצנה:">תיאור המוצר/סצנה:</label>
                    <textarea 
                        id="prompt" 
                        name="prompt" 
                        rows="4"
                        data-placeholder-en="Example: A professional elephant in savanna, golden hour lighting, 4K quality"
                        data-placeholder-he="דוגמה: פיל מקצועי בסוואנה, תאורת שעת זהב, איכות 4K"
                        placeholder="Example: A professional elephant in savanna, golden hour lighting, 4K quality"
                    ></textarea>
                    <small data-en="⚠️ Important: Write your prompt in ENGLISH only for best results." data-he="⚠️ חשוב: כתוב את הפרומפט באנגלית בלבד לתוצאות מיטביות.">⚠️ חשוב: כתוב את הפרומפט באנגלית בלבד לתוצאות מיטביות.</small>
                </div>

                <div class="form-group">
                    <label for="image" data-en="OR Upload Product Image:" data-he="או העלה תמונת מוצר:">או העלה תמונת מוצר:</label>
                    <input 
                        type="file" 
                        id="image" 
                        name="image" 
                        accept="image/*"
                    >
                    <div id="imagePreviewWrapper" style="position: relative; display: inline-block;">
                        <div id="imagePreview"></div>
                        <button type="button" id="removeImageBtn" class="remove-image-btn" style="display: none;" data-en="✕ Remove" data-he="✕ הסר">✕ הסר</button>
                    </div>
                    <small data-en="Upload image to edit it, or leave empty to generate from scratch" data-he="העלה תמונה כדי לערוך אותה, או השאר ריק כדי ליצור מאפס">העלה תמונה כדי לערוך אותה, או השאר ריק כדי ליצור מאפס</small>
                </div>

                <button type="submit" id="generateBtn" class="btn-primary">
                    <span id="generateBtnText" data-en="Generate Image" data-he="צור תמונה">צור תמונה</span>
                    <span id="generateLoader" class="loader" style="display: none;"></span>
                </button>
            </form>
        </div>

        <!-- Step 2: Result -->
        <div id="step2" class="step-container" style="display: none;">
            <h2 data-en="Result" data-he="תוצאה">תוצאה</h2>
            
            <div class="result-container">
                <div id="imagePreviewContainer">
                    <img id="generatedImage" src="" alt="Generated Image">
                </div>

                <div class="actions">
                    <button type="button" id="addTextBtn" class="btn-primary">
                        <span data-en="✍️ Add/Edit Text" data-he="✍️ הוסף/ערוך טקסט">✍️ הוסף/ערוך טקסט</span>
                    </button>

                    <button type="button" id="editBtn" class="btn-secondary">
                        <span data-en="✏️ Edit Prompt" data-he="✏️ ערוך פרומפט">✏️ ערוך פרומפט</span>
                    </button>

                    <button type="button" id="downloadBtn" class="btn-success">
                        <span data-en="⬇️ Download Image" data-he="⬇️ הורד תמונה">⬇️ הורד תמונה</span>
                    </button>

                    <button type="button" id="backToGridBtn" class="btn-secondary" style="display: none;">
                        <span data-en="🔙 Back to Gallery" data-he="🔙 חזור לגלריה">🔙 חזור לגלריה</span>
                    </button>

                    <button type="button" id="startOverBtn" class="btn-secondary">
                        <span data-en="🔄 Start Over" data-he="🔄 התחל מחדש">🔄 התחל מחדש</span>
                    </button>
                </div>
            </div>
        </div>

        <div id="error" class="error" style="display: none;"></div>
        <div id="success" class="success" style="display: none;"></div>
    </div>

    <!-- Text Editor Modal -->
    <div id="textEditorModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-en="Add Text to Image" data-he="הוסף טקסט לתמונה">הוסף טקסט לתמונה</h2>
                <button class="modal-close" id="closeTextEditor">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="editor-container">
                    <!-- Canvas for image + text preview -->
                    <div class="canvas-wrapper">
                        <canvas id="textCanvas"></canvas>
                    </div>
                    
                    <!-- Controls -->
                    <div class="editor-controls">
                        <div class="form-group">
                            <label data-en="Text:" data-he="טקסט:">טקסט:</label>
                            <textarea 
                                id="textInput" 
                                rows="3"
                                data-placeholder-en="Enter your text here..."
                                data-placeholder-he="הכנס את הטקסט שלך כאן..."
                                placeholder="הכנס את הטקסט שלך כאן..."
                                dir="auto"
                            ></textarea>
                            <small class="hint" data-en="💡 Click on the image to move text position" data-he="💡 לחץ על התמונה כדי להזיז את הטקסט">💡 לחץ על התמונה כדי להזיז את הטקסט</small>
                        </div>

                        <div id="textSuggestions" class="text-suggestions">
                            <div class="suggestions-loading" style="display: none;">
                                <span data-en="🤖 AI is analyzing the image..." data-he="🤖 AI מנתח את התמונה...">🤖 AI מנתח את התמונה...</span>
                            </div>
                            <!-- AI-generated text suggestions will appear here -->
                        </div>

                        <div class="form-group">
                            <label data-en="Font:" data-he="פונט:">פונט:</label>
                            <select id="fontFamily">
                                <option value="Arial">Arial</option>
                                <option value="Arial Black">Arial Black</option>
                                <option value="Calibri">Calibri</option>
                                <option value="Tahoma">Tahoma</option>
                                <option value="Verdana">Verdana</option>
                                <option value="Impact">Impact</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label data-en="Font Size:" data-he="גודל פונט:">גודל פונט:</label>
                            <input type="range" id="fontSize" min="20" max="150" value="48" step="1">
                            <span id="fontSizeValue">48px</span>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="boldFont">
                                <span data-en="Bold" data-he="מודגש">מודגש</span>
                            </label>
                        </div>

                        <div class="form-group">
                            <label data-en="Text Color:" data-he="צבע טקסט:">צבע טקסט:</label>
                            <input type="color" id="textColor" value="#ffffff">
                        </div>

                        <div class="form-group">
                            <label data-en="Outline Color:" data-he="צבע מתאר:">צבע מתאר:</label>
                            <input type="color" id="outlineColor" value="#000000">
                        </div>

                        <div class="form-group">
                            <label data-en="Outline Width:" data-he="עובי מתאר:">עובי מתאר:</label>
                            <input type="range" id="outlineWidth" min="0" max="10" value="2" step="1">
                            <span id="outlineWidthValue">2px</span>
                        </div>

                        <div class="editor-actions">
                            <button type="button" id="applyTextBtn" class="btn-primary">
                                <span data-en="✅ Apply Text" data-he="✅ החל טקסט">✅ החל טקסט</span>
                            </button>
                            <button type="button" id="cancelTextBtn" class="btn-secondary">
                                <span data-en="Cancel" data-he="ביטול">ביטול</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>

